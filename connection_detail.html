<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§ú‡§≤ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® - ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</title>
    <link rel="icon" type="image/png" href="img1.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #10b981;
            --secondary: #059669;
            --light-green: #d1fae5;
            --dark-green: #065f46;
            --gradient-primary: linear-gradient(135deg, #10b981, #059669);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
            min-height: 100vh;
            color: #1f2937;
        }

        /* Topbar */
        .topbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--gradient-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 24px;
            height: 70px;
            box-shadow: var(--shadow);
        }

        .topbar-left { display: flex; align-items: center; gap: 15px; }
        .logo { height: 45px; width: auto; border-radius: 6px; }
        .org-name { color: white; font-size: 20px; font-weight: bold; }

        .topbar-right a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.3s;
        }

        /* Stats Cards */
        .main-container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .main-heading { text-align: center; color: var(--dark-green); font-weight: 700; margin-bottom: 25px; }

        .stats-container { display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        .stat-card { flex: 1; min-width: 200px; padding: 20px; border-radius: 12px; text-align: center; color: white; box-shadow: var(--shadow); }
        .stat-card.total { background: var(--gradient-primary); }
        .stat-card.current { background: linear-gradient(135deg, #34d399, #10b981); }
        .stat-card.remaining { background: linear-gradient(135deg, #ef4444, #dc2626); }

        /* Search Box */
        .search-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        #searchInput { width: 400px; padding: 12px; border: 2px solid #d1fae5; border-radius: 10px; }
        .search-btn { background: var(--gradient-primary); color: white; border: none; padding: 0 25px; border-radius: 10px; font-weight: 600; }

        /* Table */
        .main-table-container { background: white; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); overflow: hidden; }
        .data-table { width: 100%; border-collapse: collapse; }
        
        /* Table Headers Centered as requested */
        .data-table th { 
            background: var(--gradient-primary); 
            color: white; 
            padding: 15px; 
            text-align: center; 
            font-size: 14px;
        }

        .data-table td { padding: 12px; border-bottom: 1px solid #f3f4f6; text-align: center; font-size: 14px; }
        .data-table tbody tr:hover { background-color: #f0fdf4; }

        .status-paid { background: #d1fae5; color: #065f46; padding: 4px 10px; border-radius: 20px; font-weight: bold; font-size: 12px; }

        /* Animation */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .stat-card, .main-table-container { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body>

<div class="topbar">
    <div class="topbar-left">
        <img src="img1.png" alt="Logo" class="logo">
        <span class="org-name">‡§ú‡§≤ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</span>
    </div>
    <div class="topbar-right">
        <a href="water_management.html"><i class="fas fa-home"></i> ‡§π‡•ã‡§Æ</a>
    </div>
</div>

<div class="main-container">
    <h1 class="main-heading">üö∞ ‡§ú‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</h1>

    <div class="stats-container">
        <div class="stat-card total"><h3>‡§ï‡•Å‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®</h3><div class="number" id="countTotal">0</div></div>
        <div class="stat-card current"><h3>‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø</h3><div class="number" id="sumCurrent">‚Çπ0</div></div>
        <div class="stat-card remaining"><h3>‡§∂‡•á‡§∑ ‡§∞‡§æ‡§∂‡§ø</h3><div class="number" id="sumRemaining">‚Çπ0</div></div>
    </div>

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="‡§®‡§æ‡§Æ, ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§Ç‡§¨‡§∞ ‡§Ø‡§æ ‡§µ‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§ñ‡•ã‡§ú‡•á‡§Ç..." onkeyup="filterTable()">
        <button class="search-btn"><i class="fas fa-search"></i> ‡§ñ‡•ã‡§ú‡•á‡§Ç</button>
    </div>

    <div class="main-table-container">
        <table class="data-table" id="connectionTable">
            <thead>
                <tr>
                    <th>üîó ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®</th>
                    <th>üèòÔ∏è ‡§µ‡§æ‡§∞‡•ç‡§°</th>
                    <th>üë§ ‡§®‡§æ‡§Æ</th>
                    <th>üì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤</th>
                    <th>üí∞ ‡§∞‡§æ‡§∂‡§ø (25-26)</th>
                    <th>üìÖ ‡§¨‡§ï‡§æ‡§Ø‡§æ</th>
                    <th>üßæ ‡§∂‡•á‡§∑ ‡§∞‡§æ‡§∂‡§ø</th>
                    <th>üìä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>
</div>

<script>
    // CSV file ko fetch karne ka function
    async function loadCSV() {
        try {
            // "data.csv" ko apni file ke sahi naam se badal dein
            const response = await fetch('data.csv'); 
            const data = await response.text();
            const rows = data.split('\n').slice(1); // Header row ko chhod kar
            const tableBody = document.getElementById('tableBody');
            
            let totalRecords = 0;
            let totalCurrent = 0;
            let totalRemaining = 0;

            rows.forEach(row => {
                const cols = row.split(',');
                if (cols.length >= 7) {
                    const tr = document.createElement('tr');
                    
                    // Dashboard stats calculation
                    totalRecords++;
                    const currentVal = parseFloat(cols[4]) || 0;
                    const remainingVal = parseFloat(cols[6]) || 0;
                    totalCurrent += currentVal;
                    totalRemaining += remainingVal;

                    // Row HTML
                    tr.innerHTML = `
                        <td>${cols[0]}</td>
                        <td>${cols[1]}</td>
                        <td style="text-align:left; font-weight:bold;">${cols[2]}</td>
                        <td>${cols[3]}</td>
                        <td>‚Çπ${currentVal.toLocaleString('en-IN')}</td>
                        <td>‚Çπ${(parseFloat(cols[5]) || 0).toLocaleString('en-IN')}</td>
                        <td style="color: ${remainingVal > 0 ? 'red' : 'green'}; font-weight:bold;">
                            ‚Çπ${remainingVal.toLocaleString('en-IN')}
                        </td>
                        <td>${remainingVal == 0 ? '<span class="status-paid">‚úÖ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®</span>' : '‚ùå ‡§¨‡§ï‡§æ‡§Ø‡§æ'}</td>
                    `;
                    tableBody.appendChild(tr);
                }
            });

            // Dashboard update
            document.getElementById('countTotal').innerText = totalRecords;
            document.getElementById('sumCurrent').innerText = '‚Çπ' + totalCurrent.toLocaleString('en-IN');
            document.getElementById('sumRemaining').innerText = '‚Çπ' + totalRemaining.toLocaleString('en-IN');

        } catch (error) {
            console.error('Error loading CSV:', error);
            document.getElementById('tableBody').innerHTML = '<tr><td colspan="8">CSV file load nahi ho saki. Kripya check karein.</td></tr>';
        }
    }

    // Search Filter Function
    function filterTable() {
        const input = document.getElementById("searchInput").value.toUpperCase();
        const rows = document.getElementById("tableBody").getElementsByTagName("tr");

        for (let i = 0; i < rows.length; i++) {
            const textContent = rows[i].textContent || rows[i].innerText;
            rows[i].style.display = textContent.toUpperCase().indexOf(input) > -1 ? "" : "none";
        }
    }

    // Page load hone par CSV load karein
    window.onload = loadCSV;
</script>

</body>
</html>
